{
    "supported_model_type": [
        "GANVocoder",
        "Fastspeech2",
        "DiffSVC",
        "Transformer",
        "EDM",
        "CD"
    ],
    "task_type": "",
    "dataset": [
        "libritts"
    ],
    "use_custom_dataset": [],
    "preprocess": {
        "phone_extractor": "espeak",
        "data_augment": false,
        "trim_silence": false,
        "num_silent_frames": 8,
        "trim_fft_size": 512,
        "trim_hop_size": 128,
        "trim_top_db": 30,
        "extract_mel": false,
        "mel_extract_mode": "",
        "extract_linear_spec": false,
        "extract_mcep": false,
        "extract_pitch": false,
        "extract_acoustic_token": false,
        "pitch_remove_outlier": false,
        "extract_uv": false,
        "pitch_norm": false,
        "extract_audio": false,
        "extract_label": false,
        "pitch_extractor": "parselmouth",
        "extract_energy": false,
        "energy_remove_outlier": false,
        "energy_norm": false,
        "energy_extract_mode": "from_mel",
        "extract_duration": false,
        "extract_amplitude_phase": false,
        "mel_min_max_norm": false,
        "extract_phone": true,
        "lexicon_path": "./text/lexicon/librispeech-lexicon.txt",
        "extract_whisper_feature": false,
        "extract_contentvec_feature": false,
        "extract_mert_feature": false,
        "extract_wenet_feature": false,
        "n_mel": 80,
        "win_size": 480,
        "hop_size": 120,
        "sample_rate": 24000,
        "n_fft": 1024,
        "fmin": 0,
        "fmax": 12000,
        "min_level_db": -115,
        "ref_level_db": 20,
        "bits": 8,
        "processed_dir": "data",
        "trimmed_wav_dir": "trimmed_wavs",
        "raw_data": "raw_data",
        "phone_dir": "phones",
        "wav_dir": "wavs",
        "audio_dir": "audios",
        "log_amplitude_dir": "log_amplitudes",
        "phase_dir": "phases",
        "real_dir": "reals",
        "imaginary_dir": "imaginarys",
        "label_dir": "labels",
        "linear_dir": "linears",
        "mel_dir": "mels",
        "mcep_dir": "mcep",
        "dur_dir": "durs",
        "symbols_dict": "symbols.dict",
        "lab_dir": "labs",
        "wenet_dir": "wenet",
        "contentvec_dir": "contentvec",
        "pitch_dir": "pitch",
        "energy_dir": "energys",
        "phone_pitch_dir": "phone_pitches",
        "phone_energy_dir": "phone_energys",
        "uv_dir": "uvs",
        "duration_dir": "duration",
        "phone_seq_file": "phone_seq_file",
        "file_lst": "file.lst",
        "train_file": "train.json",
        "valid_file": "test.json",
        "spk2id": "spk2id.json",
        "utt2spk": "utt2spk",
        "emo2id": "emo2id.json",
        "utt2emo": "utt2emo",
        "use_text": false,
        "use_phone": true,
        "use_phn_seq": false,
        "use_lab": false,
        "use_linear": false,
        "use_mel": false,
        "use_min_max_norm_mel": false,
        "use_wav": false,
        "use_phone_pitch": false,
        "use_log_scale_pitch": false,
        "use_phone_energy": false,
        "use_phone_duration": false,
        "use_log_scale_energy": false,
        "use_wenet": false,
        "use_dur": false,
        "use_spkid": true,
        "use_emoid": false,
        "use_frame_pitch": false,
        "use_uv": false,
        "use_frame_energy": false,
        "use_frame_duration": false,
        "use_audio": false,
        "use_label": false,
        "use_one_hot": false,
        "use_amplitude_phase": false,
        "align_mel_duration": false,
        "use_code": true,
        "use_pitch": true,
        "use_duration": true,
        "use_len": true,
        "use_cross_reference": true,
        "melspec_dir": "mel",
        "code_dir": "code",
        "clip_mode": "start",
        "metadata_dir": "metadata",
        "read_metadata": false,
        "frameshift": 0.0125,
        "language": "en-us"
    },
    "train": {
        "ddp": false,
        "batch_size": 8,
        "max_steps": 1000000,
        "tracker": [
            "tensorboard"
        ],
        "max_epoch": 5000,
        "save_checkpoint_stride": [
            1
        ],
        "keep_last": [
            1000
        ],
        "run_eval": [
            true
        ],
        "random_seed": 114,
        "optimizer": "AdamW",
        "adamw": {
            "lr": 0.0004
        },
        "scheduler": "ReduceLROnPlateau",
        "reducelronplateau": {
            "factor": 0.8,
            "patience": 10,
            "min_lr": 0.0001
        },
        "sampler": {
            "holistic_shuffle": true,
            "drop_last": true
        },
        "dataloader": {
            "num_worker": 16,
            "pin_memory": true
        },
        "gradient_accumulation_step": 1,
        "total_training_steps": 800000,
        "save_summary_steps": 500,
        "save_checkpoints_steps": 2000,
        "valid_interval": 2000,
        "keep_checkpoint_max": 100,
        "multi_speaker_training": false,
        "use_dynamic_batchsize": true,
        "max_tokens": 7500,
        "max_sentences": 32,
        "lr_warmup_steps": 5000,
        "lr_scheduler": "cosine",
        "num_train_steps": 800000,
        "adam": {
            "lr": 0.0001
        },
        "diff_ce_loss_lambda": 0.5,
        "diff_noise_loss_lambda": 1.0,
        "epochs": 5000
    },
    "base_config": "egs/tts/NaturalSpeech2/exp_config_base.json",
    "model_type": "NaturalSpeech2",
    "model": {
        "latent_dim": 128,
        "prior_encoder": {
            "vocab_size": 100,
            "pitch_min": 50,
            "pitch_max": 1100,
            "pitch_bins_num": 512,
            "encoder": {
                "encoder_layer": 6,
                "encoder_hidden": 512,
                "encoder_head": 8,
                "conv_filter_size": 2048,
                "conv_kernel_size": 9,
                "encoder_dropout": 0.2,
                "use_cln": true
            },
            "duration_predictor": {
                "input_size": 512,
                "filter_size": 512,
                "kernel_size": 3,
                "conv_layers": 30,
                "cross_attn_per_layer": 3,
                "attn_head": 8,
                "drop_out": 0.5
            },
            "pitch_predictor": {
                "input_size": 512,
                "filter_size": 512,
                "kernel_size": 5,
                "conv_layers": 30,
                "cross_attn_per_layer": 3,
                "attn_head": 8,
                "drop_out": 0.5
            }
        },
        "diffusion": {
            "wavenet": {
                "input_size": 128,
                "hidden_size": 512,
                "out_size": 128,
                "num_layers": 40,
                "cross_attn_per_layer": 3,
                "dilation_cycle": 2,
                "attn_head": 8,
                "drop_out": 0.2
            },
            "beta_min": 0.05,
            "beta_max": 20,
            "sigma": 1.0,
            "noise_factor": 1.0,
            "ode_solver": "euler",
            "diffusion_type": "diffusion"
        },
        "prompt_encoder": {
            "encoder_layer": 6,
            "encoder_hidden": 512,
            "encoder_head": 8,
            "conv_filter_size": 2048,
            "conv_kernel_size": 9,
            "encoder_dropout": 0.2,
            "use_cln": false
        },
        "query_emb": {
            "query_token_num": 32,
            "hidden_size": 512,
            "head_num": 8
        },
        "inference_step": 500
    },
    "dataset_path": {
        "libritts": "/data/data/01_LibriTTS/01_dev_set/dev-clean/LibriTTS"
    },
    "log_dir": "ckpts/tts"
}